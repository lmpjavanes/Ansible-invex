---
# software_packages_windows.yml
# Configuración para la instalación en Windows.

# Ruta base en el NFS accesible desde los servidores Windows
windows_software_source: "\\\\kirov01\\SISTEMASOPERATIVOS_WINDOWSLINUX\\Software\\Agente Nagios\\Nagios"

# Archivos a copiar desde la fuente
windows_files_to_copy:
  - "ncpa.exe"
  - "install_ncpa_prod.bat"
  - "install_ncpa_drp.bat"

# Ruta de destino en los servidores Windows
windows_dest_path: "C:\\sys\\"

# Configuración específica para el agente Nagios/NCPA
ncpa_install:
  description: "Agente de monitorización Nagios NCPA"
  vendor: "Nagios"
  
  # El nombre del ejecutable de instalación
  installer: "ncpa.exe"
  
  # El nombre del paquete para el reporte
  package_name: "NCPA Agent"
  
  # Tokens y configuraciones para cada ambiente (NUEVO)
  prod_token: "{{ nagios_token_prod | default('mytoken_prod') }}"
  prod_ip: "{{ nagios_ip_prod | default('192.168.215.159') }}"
  drp_token: "{{ nagios_token_drp | default('mytoken_drp') }}"
  drp_ip: "{{ nagios_ip_drp | default('192.168.35.123') }}"
  port: "5693"  # Puerto estándar de NCPA
  
  # Comando para validar la instalación
  validation_command: "Test-Path 'C:\\Program Files\\Nagios\\NCPA\\ncpa.exe'"
  
  # Comando para obtener la versión
  version_command: "(Get-Item 'C:\\Program Files\\Nagios\\NCPA\\ncpa.exe').VersionInfo.ProductVersion"
  
  # Comando para verificar el estado del servicio
  status_command: "Get-Service -Name ncpasvc -ErrorAction SilentlyContinue | Select-Object -ExpandProperty Status"